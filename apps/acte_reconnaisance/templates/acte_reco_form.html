{% extends 'pages/riha-base.html' %}
{% load static %}

{% block main-content %}

	<link rel="stylesheet" type="text/css" href="{% static 'assets/css/chosen.min.css' %}">
<div class="row"> <!-- begin global row -->

	<div class="col-xl-3 col-md-12"><!-- begin left  column -->
		<div class="card">
			<div class="card-body">
				<div class="category-title pb-1">
					<h6 class="text-center font-medium-1 text-bold-800 text-info">-
						<i class="ft-corner-left-down"></i> Requirements
					</h6>
				</div>

				<div>
					<ul class="list-group">
						<li class="list-group-item">
							<span class="badge badge-warning badge-pill float-left"><i class="ft-check-circle"></i></span> <a href="#" class="blue-grey darken-1 font-medium-1">     &nbsp; Carte Nationale d'Identite </a>
						</li>
						<li class="list-group-item">
							<span class="badge badge-warning badge-pill float-left"><i class="ft-check-circle"></i></span> <a href="#" class="blue-grey darken-1 font-medium-1">     &nbsp; Agakaye ko Murugo</a>
						</li>
						<li class="list-group-item">
							<span class="badge badge-warning badge-pill float-left"><i class="ft-check-circle"></i></span> <a href="#" class="blue-grey darken-1 font-medium-1">     &nbsp; Attestation des enfants</a>
						</li>
						<li class="list-group-item">
							<span class="badge badge-warning badge-pill float-left"><i class="ft-check-circle"></i></span> <a href="#" class="blue-grey darken-1 font-medium-1">     &nbsp; Photo passport</a>
						</li>
					</ul>
				</div>                          
			</div> 
		</div>             
	</div> <!-- end left  column --> 
	<div class="col-xl-9 col-md-12"> <!-- begin right column -->           
		<div class="card border-info border-lighten-1"> <!-- begin card -->
			<div class="card-header bg-info bg-lighten-1 border-info border-lighten-1">
				<h1 class="font-medium-3 text-bold-700 text-white"><i class="ft-file-plus"></i>Attestation de reconnaissance</h1>
			</div>
			<div class="card-body">
				{% if preview %}
				<div id="document" class="col-12">
					<div id="template" class="m-auto" style="width: 21cm;padding: 2cm;border:1px solid black;">
						<strong>REPUBLIQUE DU BURUNDI</strong><br/>
						<strong>MINISTERE DE L&rsquo;INTERIEUR </strong><br/>
						<strong>ET DE LA FORMATION PATRIOTIQUE </strong><br/>
						<strong>ET DEVELOPPEMENT LOCAL</strong><br/>
						<strong>MUNICIPALITE DE {{ acte_reconnais.search_place.zone.commune.province|upper }}</strong><br/>
						<strong>COMMUNE URBAINE DE {{ acte_reconnais.search_place.zone.commune.name|upper }}</strong><br/>
						<strong><u>ZONE DE {{ acte_reconnais.search_place.zone.name|upper }}</u></strong><br/>

						<div class="row">
							
							<div class="col-3">
								MARRIAGE <br>
								ACTE : {{ acte_reconnais.acte }}<br>VOLUME : {{ acte_reconnais.volume }}
							</div>
							<div class="col-9 text-center">
								

							<p style="text-align: center;"><strong><u>ACTE DE L’ETAT CIVIL N</u></strong><u>&deg;</u><strong><u>&hellip;&hellip;.&hellip;../2020 <br> ACTE DE RECONNAISSANCE</u></strong></p>
							<p>&nbsp;</p>
							<p class="text-justify">&emsp;&emsp;&emsp;{{ acte_reconnais.dateString }} , devant nous {{ acte_reconnais.search_place.zone.leaderFullName }}
							, Officier de l’Etat Civil à {{ acte_reconnais.search_place.zone.commune.province }}, a comparu : {{ acte_reconnais.user.first_name }} {{ acte_reconnais.user.last_name }} ,
							{{ profiles.job }} , {% if profiles.gender == 'H' %} fils {% else %} fille {% endif %} de {{ acte_reconnais.user.profile.father|default:"sans" }} et de
								{{ acte_reconnais.user.profile.mother|default:"sans" }}, {% if profiles.gender == 'H' %} né {% else %} née {% endif %} à {{ profiles.quarter.name }} en {{ profiles.birthdate }},
								résidant actuellement à {{ profiles.residence.zone.commune.province.name }}, de nationalité {{ profiles.nationnalite }} , lequel nous a déclaré en présence de
								{{ check_cni_t11.user.last_name }} {{ check_cni_t11.user.first_name }}, {{ check_cni_t11.job }}, {% if check_cni_t11.gender == 'H' %} agé {% else %} agée {% endif %} de {{ check_cni_t11.birthdate|date:'-Y'|add:2020 }} ans, résidant à {{ check_cni_t11.residence.zone.commune.province.name }}, de nationalité {{ check_cni_t11.nationnalite }}, et de 
								{{ check_cni_t12.user.last_name }} {{ check_cni_t12.user.first_name }}, {{ check_cni_t12.job }}, {% if check_cni_t12.gender == 'H' %} agé {% else %} agée {% endif %} de {{ check_cni_t11.birthdate|date:'-Y'|add:2020 }} ans,	résidant à {{ check_cni_t12.residence.zone.commune.province.name }}, de nationalité {{ check_cni_t12.nationnalite }},
							 qu’il reconnait pour son enfant naturel l’enfant de sexe {% if check_cni_t13.gender == 'H' %} masculin {% else %} féminin {% endif %} auquel a été donné le nom et prénom de {{ check_cni_t13.user.first_name }} {{ check_cni_t13.user.last_name }},
							 {% if check_cni_t13.gender == 'H' %} né {% else %} née {% endif %} à {{ check_cni_t13.quarter.zone.commune.province.name }}, le {{ check_cni_t13.dateString1 }} de lui-même déclarant et de {{ check_cni_t14.user.first_name }} {{ check_cni_t14.user.last_name }}, {% if check_cni_t14.gender == 'H' %} agé {% else %} agée {% endif %} de {{ check_cni_t14.birthdate|date:'-Y'|add:2020 }} ans, 
								{{ check_cni_t14.job }}, résidant à {{ check_cni_t14.residence.zone.commune.province.name }}, de nationalité {{ check_cni_t14.nationnalite }}

							</p>
							<br>
							<p class="text-justify">En foi de quoi, nous avons dressé le présent acte et après que connaissance de son contenu en a été donnée aux comparants et aux témoins, l’avons signé avec eux.</p>
							<p class="text-center">L’OFFICIER DE L’ETAT CIVIL <br>
									Sé/ {{ acte_reconnais.search_place.zone.leaderFullName }}</p>
						
							<div class="row">
								<div class="col-6 text-justify">
									<b><u>LES COMPARANTS</u></b> <br>
									1. {{ profiles.user.first_name }} {{ profiles.user.last_name }}<br>
									2. {{ check_cni_t14.user.first_name }} {{ check_cni_t14.user.last_name }} <br>

									<b>LE CHEF DE QUARTIER {{ acte_reconnais.search_place.name|upper }}</b>
									{{ acte_reconnais.search_place.leaderFullName }}
								</div>
								<div class="col-6 text-justify">
									<b><u>LES TEMOINS</u></b> <br>
									1. {{ check_cni_t11.user.first_name }} {{ check_cni_t11.user.last_name }} <br>
									2. {{ check_cni_t12.user.first_name }} {{ check_cni_t12.user.last_name }} <br>
									<p style="text-align: justify;"><strong>FAIT &agrave; {{ acte_reconnais.search_place.zone.commune.province.name|upper }}, le {{ acte_reconnais.date|date:'d/m/Y' }}</strong></p>
									<p style="text-align: justify;"><strong>LE CHEF DE ZONE {{ acte_reconnais.search_place.zone.name|upper }}</strong></p>
									<p style="text-align: justify;"><strong>{{ acte_reconnais.search_place.zone.leaderFullName }}</strong></p>
								</div>
							</div>

							</div>
						</div>

					</div>
				</div>
				{% endif %}
				<form action="." method="post" enctype="multipart/form-data" class="new-added-form">
					{% csrf_token %}
					<div id="formulaire" {% if preview %} style="display: none;" {% endif %}>
						{% for fo in form %}

						<div class="step-one">
							{% if forloop.counter <= 5 %}
							<label style = "margin-top:2%;margin-bottom:2%;" for="{{ fo.id_for_label }}">{{ fo.label }}</label>
							{{ fo.non_field_errors }}
							{{ fo.errors }}
							{{ fo }}
							{% endif %}
						</div>
			
						<div class="step-two">
							{% if forloop.counter >= 6 %}
							<label style = "margin-top:2%;margin-bottom:2%;" for="{{ fo.id_for_label }}">{{ fo.label }}</label>
							{{ fo.non_field_errors }}
							{{ fo.errors }}
							{{ fo }}
							{% endif %}
						</div>
			
						{% endfor %}
				</div>
					{% if preview %}
					<button input type="submit" class="btn btn-outline-danger mt-1 ml-1" name="cancel" value="cancel">
					<i class="ft-corner-up-left"></i> Retour 
				</button>
					{% else %}
					<button id="preview" type="submit" class="btn btn-outline-warning mt-1" name="preview" value="preview">
						<i class="ft-eye"></i> Preview
					</button>
					<a id="continue1" class="btn btn-outline-primary mt-1">Step 1</a>
					<a id="continue2" class="btn btn-outline-primary mt-1">Step 2</a>

					{% endif %}
					<button type="submit" class="btn btn-outline-success mt-1" name="submit" value="submit">
						<i class="ft-navigation"></i>Envoyer</a>
					</button>
				</form>
			</div> <!-- End card body -->
		</div>	
	</div>
</div>
<script src="{% static 'src/js/core/libraries/jquery.min.js' %}" type="text/javascript"></script>
<script src="{% static 'src/js/chosen.jquery.min.js' %}" type="text/javascript"></script>
<script>
	$('#search_place').chosen({ width: '100%' });

    $(".step-two").hide();
	$("#continue1").hide();
	$("#continue2").show();
	$("#preview").hide();
	$("#submit").hide();

    $("#continue1").click(function(){
		$(".step-one").show();
		$(".step-two").hide();
		$("#continue1").hide();
		$("#continue2").show();
		$("#preview").hide();
		$("#submit").hide();
    });

    $("#continue2").click(function(){
        $(".step-one").hide();
        $(".step-two").show();
		$("#continue2").hide();
		$("#continue1").show();
		$("#preview").show();
		$("#submit").show();
    });

</script>
{% endblock %}

<div class="m-auto col-12 col-md-6">
	<form action="." method="post" enctype="multipart/form-data" class="new-added-form">
		{% csrf_token %}
		<div id="formulaire" {% if preview %} style="display: none;" {% endif %}>
		<!-- {{ form.as_p }} -->
			{% for fo in form %}
			<div class="step-one">
				{% if forloop.counter <= 7 %}
				<label for="{{ fo.id_for_label }}">{{ fo.label }}</label>
				{{ fo.non_field_errors }}
				{{ fo.errors }}
				{{ fo }}
				{% endif %}
			</div>

			<div class="step-two">
				{% if forloop.counter >= 8 and forloop.counter <= 15 %}
				<label for="{{ fo.id_for_label }}">{{ fo.label }}</label>
				{{ fo.non_field_errors }}
				{{ fo.errors }}
				{{ fo }}
				{% endif %}
			</div>

			<div class="step-three">
				{% if forloop.counter >= 16 %}
				<label for="{{ fo.id_for_label }}">{{ fo.label }}</label>
				{{ fo.non_field_errors }}
				{{ fo.errors }}
				{{ fo }}
				{% endif %}
			</div>

			{% endfor %}
			<br>
		</div>

		{% if preview %}
			<input type="submit" class="btn btn-outline-danger" name="cancel" value="Cancel">
			<input type="submit" class="btn btn-outline-primary" name="submit" value="Submit">
		{% else %}
			<input id="preview" type="submit" class="btn btn-outline-secondary" name="preview" value="Preview">
			<input id="continue1" class="btn btn-outline-primary" value="Step 1">
			<input id="continue2" class="btn btn-outline-primary" value="Step 2">
			<input id="continue3" class="btn btn-outline-primary" value="Step 3">
			<input id="submit" type="submit" class="btn btn-outline-primary" name="submit" value="Submit">
		{% endif %}

		<datalist id="zones">
			{% for zone in zones %}
				<option value="{{ zone.name }}"/> 
			{% endfor %}
		</datalist>
		<datalist id="quarters">
			{% for quarter in quarters %}
				<option value="{{ quarter }}"/> 
			{% endfor %}
		</datalist>
	</form>
</div>
